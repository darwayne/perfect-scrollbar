/*! perfect-scrollbar - v0.4.4
* http://noraesae.github.com/perfect-scrollbar/
* Copyright (c) 2013 HyeonJe Jun; Licensed MIT */
"use strict";(function(e){var t={wheelSpeed:10,wheelPropagation:!1,minScrollbarLength:null};e.fn.perfectScrollbar=function(o,r){return this.each(function(){var l=e.extend(!0,{},t),n=e(this);if("object"==typeof o?e.extend(!0,l,o):r=o,"update"===r)return n.data("perfect-scrollbar-update")&&n.data("perfect-scrollbar-update")(),n;if("destroy"===r)return n.data("perfect-scrollbar-destroy")&&n.data("perfect-scrollbar-destroy")(),n;if(n.data("perfect-scrollbar"))return n.data("perfect-scrollbar");n.addClass("ps-container");var s,c,a,i,p,u,f,d,h=e("<div class='ps-scrollbar-x'></div>").appendTo(n),g=e("<div class='ps-scrollbar-y'></div>").appendTo(n),v=parseInt(h.css("bottom"),10),b=parseInt(g.css("right"),10),m=function(){var e=parseInt(d*(i-c)/(c-f),10);n.scrollTop(e),h.css({bottom:v-e})},w=function(){var e=parseInt(u*(a-s)/(s-p),10);n.scrollLeft(e),g.css({right:b-e})},T=function(e){return l.minScrollbarLength&&(e=Math.max(e,l.minScrollbarLength)),e},I=function(){var e=!1,t=c-f;h.css({left:u+n.scrollLeft(),bottom:v-n.scrollTop(),width:p}),parseInt(g.css("top"))!=n.scrollTop()+t&&d==t&&(e=!0),g.css({top:d+n.scrollTop(),right:b-n.scrollLeft(),height:f}),e&&n.trigger("scrollBottom")},L=function(){s=n.width(),c=n.height(),a=n.prop("scrollWidth"),i=n.prop("scrollHeight"),a>s?(p=T(parseInt(s*s/a,10)),u=parseInt(n.scrollLeft()*(s-p)/(a-s),10)):(p=0,u=0,n.scrollLeft(0)),i>c?(f=T(parseInt(c*c/i,10)),d=parseInt(n.scrollTop()*(c-f)/(i-c),10)):(f=0,d=0,n.scrollTop(0)),d>=c-f&&(d=c-f),u>=s-p&&(u=s-p),I()},C=function(e,t){var o=e+t,r=s-p;u=0>o?0:o>r?r:o,h.css({left:u+n.scrollLeft()})},y=function(e,t){var o=e+t,r=c-f,l=!1;d=0>o?0:o>r?r:o,parseInt(g.css("top"))!=n.scrollTop()+r&&d==r&&(l=!0),g.css({top:d+n.scrollTop()}),l&&n.trigger("scrollBottom")},D=function(){var t,o;h.bind("mousedown.perfect-scroll",function(e){o=e.pageX,t=h.position().left,h.addClass("in-scrolling"),e.stopPropagation(),e.preventDefault()}),e(document).bind("mousemove.perfect-scroll",function(e){h.hasClass("in-scrolling")&&(w(),C(t,e.pageX-o),e.stopPropagation(),e.preventDefault())}),e(document).bind("mouseup.perfect-scroll",function(){h.hasClass("in-scrolling")&&h.removeClass("in-scrolling")}),t=o=null},P=function(){var t,o;g.bind("mousedown.perfect-scroll",function(e){o=e.pageY,t=g.position().top,g.addClass("in-scrolling"),e.stopPropagation(),e.preventDefault()}),e(document).bind("mousemove.perfect-scroll",function(e){g.hasClass("in-scrolling")&&(m(),y(t,e.pageY-o),e.stopPropagation(),e.preventDefault())}),e(document).bind("mouseup.perfect-scroll",function(){g.hasClass("in-scrolling")&&g.removeClass("in-scrolling")}),t=o=null},x=function(){var e=function(e,t){var o=n.scrollTop();if(0===o&&t>0&&0===e)return!l.wheelPropagation;if(o>=i-c&&0>t&&0===e)return!l.wheelPropagation;var r=n.scrollLeft();return 0===r&&0>e&&0===t?!l.wheelPropagation:r>=a-s&&e>0&&0===t?!l.wheelPropagation:!0},t=!1;n.bind("mousewheel.perfect-scroll",function(o,r,s,c){n.scrollTop(n.scrollTop()-c*l.wheelSpeed),n.scrollLeft(n.scrollLeft()+s*l.wheelSpeed),L(),t=e(s,c),t&&o.preventDefault()}),n.bind("MozMousePixelScroll.perfect-scroll",function(e){t&&e.preventDefault()})},S=function(){var t=function(e,t){n.scrollTop(n.scrollTop()-t),n.scrollLeft(n.scrollLeft()-e),L()},o={},r=0,l={},s=null,c=!1;e(window).bind("touchstart.perfect-scroll",function(){c=!0}),e(window).bind("touchend.perfect-scroll",function(){c=!1}),n.bind("touchstart.perfect-scroll",function(e){var t=e.originalEvent.targetTouches[0];o.pageX=t.pageX,o.pageY=t.pageY,r=(new Date).getTime(),null!==s&&clearInterval(s),e.stopPropagation()}),n.bind("touchmove.perfect-scroll",function(e){if(!c&&1===e.originalEvent.targetTouches.length){var n=e.originalEvent.targetTouches[0],s={};s.pageX=n.pageX,s.pageY=n.pageY;var a=s.pageX-o.pageX,i=s.pageY-o.pageY;t(a,i),o=s;var p=(new Date).getTime();l.x=a/(p-r),l.y=i/(p-r),r=p,e.preventDefault()}}),n.bind("touchend.perfect-scroll",function(){clearInterval(s),s=setInterval(function(){return.01>Math.abs(l.x)&&.01>Math.abs(l.y)?(clearInterval(s),void 0):(t(30*l.x,30*l.y),l.x*=.8,l.y*=.8,void 0)},10)})},X=function(){n.unbind(".perfect-scroll"),e(window).unbind(".perfect-scroll"),e(document).unbind(".perfect-scroll"),n.data("perfect-scrollbar",null),n.data("perfect-scrollbar-update",null),n.data("perfect-scrollbar-destroy",null),h.remove(),g.remove(),h=g=s=c=a=i=p=u=v=f=d=b=null},Y=function(t){n.addClass("ie").addClass("ie"+t);var o=function(){var t=function(){e(this).addClass("hover")},o=function(){e(this).removeClass("hover")};n.bind("mouseenter.perfect-scroll",t).bind("mouseleave.perfect-scroll",o),h.bind("mouseenter.perfect-scroll",t).bind("mouseleave.perfect-scroll",o),g.bind("mouseenter.perfect-scroll",t).bind("mouseleave.perfect-scroll",o)},r=function(){I=function(){h.css({left:u+n.scrollLeft(),bottom:v,width:p}),g.css({top:d+n.scrollTop(),right:b,height:f}),h.hide().show(),g.hide().show()},m=function(){var e=parseInt(d*i/c,10);n.scrollTop(e),h.css({bottom:v}),h.hide().show()},w=function(){var e=parseInt(u*a/s,10);n.scrollLeft(e),g.hide().show()}};6===t&&(o(),r())},M="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,E=function(){var e=navigator.userAgent.toLowerCase().match(/(msie) ([\w.]+)/);e&&"msie"===e[1]&&Y(parseInt(e[2],10)),L(),D(),P(),M&&S(),n.mousewheel&&x(),n.data("perfect-scrollbar",n),n.data("perfect-scrollbar-update",L),n.data("perfect-scrollbar-destroy",X)};return E(),n})}})(jQuery);